#!/bin/bash

echo "üîß –í–∏–ø—Ä–∞–≤–ª—è—é –≤—Å—ñ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏..."

# –ó–Ω–∞—Ö–æ–¥–∏–º–æ –≤—Å—ñ —Ñ–∞–π–ª–∏ –∑ –ø–æ–¥—ñ–±–Ω–∏–º–∏ –ø–æ–º–∏–ª–∫–∞–º–∏
for file in $(find src/pages/ -name "*.jsx"); do
    echo "–ü–µ—Ä–µ–≤—ñ—Ä—è—é $file..."
    
    # –í–∏–ø—Ä–∞–≤–ª—è—î–º–æ –ø–æ—Ä–æ–∂–Ω—ñ —É–º–æ–≤–Ω—ñ –±–ª–æ–∫–∏
    sed -i '' '/initialLoading ? (/,/) : (/c\
            {initialLoading ? (\
              <div className="loading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>\
            ) : (' "$file"
    
    # –í–∏–¥–∞–ª—è—î–º–æ –ø–æ—Ä–æ–∂–Ω—ñ InfiniteScroll –±–ª–æ–∫–∏
    sed -i '' '/hasMore={hasMore}/,/threshold={[0-9]*}/d' "$file"
    
    # –í–∏–ø—Ä–∞–≤–ª—è—î–º–æ –Ω–µ–∑–∞–∫—Ä–∏—Ç—ñ –±–ª–æ–∫–∏
    sed -i '' 's/) : ($/& <div className="content">/' "$file"
    sed -i '' 's/)}$/& <\/div>)/' "$file"
done

echo "‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ!"